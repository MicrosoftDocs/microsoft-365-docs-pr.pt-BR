---
title: Etapa 4 - Migração de arquivos e configurações de usuários
f1.keywords:
- NOCSH
ms.author: jogruszc
author: JGruszczyk
manager: jemed
ms.date: 06/10/2019
ms.audience: ITPro
ms.topic: article
ms.service: o365-solutions
localization_priority: Priority
ms.collection:
- Ent_O365
- Strat_O365_Enterprise
ms.custom: ''
description: Saiba como migrar arquivos e configurações de usuários.
ms.openlocfilehash: 9332542e5b87de3e3c237f969a3842545eb03dc4
ms.sourcegitcommit: 3dd9944a6070a7f35c4bc2b57df397f844c3fe79
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 02/15/2020
ms.locfileid: "42085280"
---
# <a name="step-4-user-files-and-settings-migration"></a><span data-ttu-id="609e0-103">Etapa 4: Migração de arquivos e configurações de usuários.</span><span class="sxs-lookup"><span data-stu-id="609e0-103">Step 4: User Files and Settings Migration</span></span>

<span data-ttu-id="609e0-104">Mover os arquivos e configurações dos usuários para os PCs novos ou atualizados é um processo crucial, falhar não é uma opção.</span><span class="sxs-lookup"><span data-stu-id="609e0-104">Moving users’ files and settings to their new or refreshed PCs is a critical process, failure is not an option.</span></span> <span data-ttu-id="609e0-105">Você pode migrar cada PC manualmente ou escolher uma das várias maneiras de automatizar o processo.</span><span class="sxs-lookup"><span data-stu-id="609e0-105">You can migrate each PC manually or you choose one of several ways to automate the process.</span></span> <span data-ttu-id="609e0-106">Seja qual for o método de migração escolhido, há três considerações principais a serem abordadas: a transferência dos arquivos dos usuários, suas configurações e o gerenciamento do Início do Windows 10 e layouts da barra de tarefas.</span><span class="sxs-lookup"><span data-stu-id="609e0-106">Whichever migration method you choose there are three main considerations to be addressed – the transfer of users’ files, their settings, and managing Windows 10 Start and taskbar layouts.</span></span>

![](../media/step-4-user-files-and-settings-migration-media/step-4-user-files-and-settings-migration-media-1.png)

<table>
<thead>
<td><img src="../media/desktop-deployment-center-home-media/desktop-deployment-center-home-media-7.png" alt="Step 4" height="135" width="135" /></td>
<td><p><span data-ttu-id="609e0-107"><strong>Etapa 4: Arquivos e configurações de usuários</strong></span><span class="sxs-lookup"><span data-stu-id="609e0-107"><strong>Step 4: User Files and Settings</strong></span></span></p>
<p><span data-ttu-id="609e0-p102">Ao atualizar ou substituir PCs, economize tempo automatizando o backup e restauração dos estados dos usuários. As novas opções de sincronização de arquivos em nuvem permitem que você imponha a sincronização per usuário das pastas Área de Trabalho, Documentos e Imagens no OneDrive para um acesso fácil aos arquivos das novas instalações do Windows.</span><span class="sxs-lookup"><span data-stu-id="609e0-p102">When refreshing or replacing PCs, save time by automating user state backup and restore. New options for cloud file sync allow you to enforce per user sync of Desktop, Documents and Pictures folders to OneDrive for seamless file access from new Windows installs.</span></span></p></td>
<td><a href="https://aka.ms/ddev4" target="_blank"><img src="../media/desktop-deployment-center-home-media/desktop-deployment-center-home-media-17.png" alt="Step 4" height="130" width="231" /></a></td>
</thead>
</table>

>[!NOTE]
><span data-ttu-id="609e0-110">Embora você possa continuar usando os processo de migração que utilizou no passado, com sua mudança para o Office 365 ProPlus, recomendamos que você use o “Movimento de Pastas Conhecidas” do OneDrive (confira abaixo).</span><span class="sxs-lookup"><span data-stu-id="609e0-110">While you can continue to use migration processes you have used in the past, with your shift to Office 365 ProPlus we recommend you use OneDrive ‘Known Folder Move’ (see below).</span></span> <span data-ttu-id="609e0-111">Para ver o processo completo de implantação de desktop, visite o [Centro de Implantação do Computador](https://aka.ms/HowToShift).</span><span class="sxs-lookup"><span data-stu-id="609e0-111">To see the full desktop deployment process, visit the [Desktop Deployment Center](https://aka.ms/HowToShift).</span></span>
>

<span data-ttu-id="609e0-p104">Uma das tarefas geralmente mais manuais e complicadas de uma implantação em grande escala é a transferência dos arquivos e configurações de seus usuários. Neste artigo, abrangeremos as opções disponíveis para que você migre os usuários para PCs novos, atualizados e com nova imagem.</span><span class="sxs-lookup"><span data-stu-id="609e0-p104">One of the trickiest and often most manual tasks of a large-scale deployment is the transferring of your users' files and settings. In this article we will cover the options available to you to migrate users to new, refreshed and re-imaged PCs.</span></span>

## <a name="manual-migration"></a><span data-ttu-id="609e0-114">Migração manual</span><span class="sxs-lookup"><span data-stu-id="609e0-114">Manual Migration</span></span>

<span data-ttu-id="609e0-p105">Quando se trata de decidir o que manter quando mudamos para um novo PC ou uma nova versão do Windows, alguns usuários podem querer manter tudo enquanto outros podem preferir aproveitar a oportunidade para limpar suas unidades. Por isso, alguns departamentos de TI preferem lidar manualmente com a migração de arquivos de usuários, algumas vezes fazendo com que equipes de suporte visitem os usuários e outras estabelecendo centrais de suporte para as quais os usuários trazem seus PCs à equipe de suporte. De qualquer maneira, os usuários podem ser envolvidos na decisão sobre o que transferir e o que descartar.</span><span class="sxs-lookup"><span data-stu-id="609e0-p105">When it comes to deciding on what to keep when moving to a new PC or a new version of Windows some users may want to keep everything, others may want to take the opportunity to clean up their drives. Because of this, some IT departments choose to handle user file migration manually, sometimes by having support teams visit users; sometimes by setting up support centers for users to bring their PCs to the support team. Either way users can be involved in deciding what to transfer and what to discard.</span></span>

<span data-ttu-id="609e0-p106">O fato de isso ser uma opção em sua organização vai depender da escala da migração que você está planejando. É claro que essa opção será limitada pelo tempo e física envolvidos no trabalho direto com os usuários, entendendo suas necessidades e copiando arquivos para seus novos PCs atualizados.</span><span class="sxs-lookup"><span data-stu-id="609e0-p106">Whether this is an option in your organization will depend on the scale of the migration you are planning. Clearly it is limited to the time and physics involved in working directly with users, understanding their needs, copying files across to their new, or freshly updated PC.</span></span>

<span data-ttu-id="609e0-p107">Se optar por uma migração manual, você poderá precisar avaliar se conseguirá completar a tarefa até janeiro de 2020, quando termina o suporte ao Windows 7. Se tiver dúvidas, pense em usar uma das opções automatizadas abaixo ou solicite mais pessoas para ajudar.</span><span class="sxs-lookup"><span data-stu-id="609e0-p107">If you are opting for a manual migration, you may need to assess whether you will be able to complete the task by January 2020, when support for Windows 7 ends. If this looks doubtful, look into using one of the automated options below, or request more people to help.</span></span>

## <a name="automated-migration-using-usmt"></a><span data-ttu-id="609e0-122">Migração automatizada usando USMT</span><span class="sxs-lookup"><span data-stu-id="609e0-122">Automated Migration using USMT</span></span> 

<span data-ttu-id="609e0-p108">Para implantações em grande escala, você pode automatizar a maior parte do processo usando ferramentas de automação de implantação baseadas em sequências de tarefas, como o Microsoft Endpoint Configuration Manager ou o Kit de Implantação da Microsoft (MDT). Estas duas soluções usam a Ferramenta de Migração de Estados de Usuários (USMT) como parte de seu processo de implantação de ponta a ponta. A USMT é parte do [Kit de Avaliação e Implantação do Windows (Windows ADK)](https://docs.microsoft.com/windows-hardware/get-started/adk-install)</span><span class="sxs-lookup"><span data-stu-id="609e0-p108">For large-scale deployments you can automate much of the process using task sequence-based deployment automation tools such as Microsoft Endpoint Configuration Manager or the Microsoft Deployment Toolkit (MDT). Both these solutions make use User State Migration Tool (USMT) as part of their end-to-end deployment process. USMT is part of the [Windows Assessment and Deployment Kit (Windows ADK)](https://docs.microsoft.com/windows-hardware/get-started/adk-install)</span></span>

<span data-ttu-id="609e0-p109">A USMT captura contas e arquivos de usuários, configurações do sistema operacional e configurações de aplicativos, e depois os migra para uma nova instalação do Windows. Ela também confere ao Administrador de TI o controle exato do que será migrado e, opcionalmente, pode excluir tipos de arquivos indesejados - por exemplo, arquivos de áudio e vídeo ou executáveis.</span><span class="sxs-lookup"><span data-stu-id="609e0-p109">USMT captures user accounts, user files, operating system settings, and application settings, and them migrates them to a new Windows installation. It also gives you, the IT Admin, control of exactly what gets migrated and, optionally, can exclude unwanted file types – for example audio and video files, or executables.</span></span>

<span data-ttu-id="609e0-p110">Durante o processo de migração, você precisará ter uma capacidade suficiente de armazenamento no servidor disponível para funcionar como depósito temporário de migração. Neste ponto, a USMT oferece dois recursos importantes. Primeiro, ela pode estimar, para cada PC, a quantidade de armazenamento de que você vai precisar. Segundo, ela permite que os depósitos de migração sejam criptografados, reduzindo o risco de que os dados sejam comprometidos ao serem armazenados nos servidores de arquivos.</span><span class="sxs-lookup"><span data-stu-id="609e0-p110">During the migration process you will need to have sufficient server storage capacity available to act as your temporary migration store. Here USMT offers two important features. First, it can estimate, per PC, the amount of storage you will need. Second, it allows for migration stores to be encrypted, reducing the risk of data being compromised while being stored on file servers.</span></span>

<span data-ttu-id="609e0-p111">Onde você estiver executando uma atualização do PC e não reformatando a partição principal do Windows, também terá a opção de usar um depósito de migração de link físico com USMT. Este processo preserva o estado do usuário no PC enquanto os antigos sistema operacional e aplicativos são removidos e atualizados. Com o processo de restauração vindo da mesma partição local, esta opção oferece melhorias significativas de desempenho e reduz o tráfego de rede.</span><span class="sxs-lookup"><span data-stu-id="609e0-p111">Where you are performing a PC refresh and not reformatting the primary Windows partition, you also have the option of using a hard-link migration store with USMT. This process preserves user state on the PC while the old operating system and apps are removed and refreshed. With the restore process coming from the same local partition, this option offers significant improvements on performance, and reduces network traffic.</span></span>

[<span data-ttu-id="609e0-135">Visão geral da Ferramenta de Migração de Estados de Usuários (USMT)</span><span class="sxs-lookup"><span data-stu-id="609e0-135">User State Migration Tool (USMT) Overview</span></span>](https://docs.microsoft.com/windows/deployment/usmt/usmt-overview)

## <a name="onedrive-known-folder-move"></a><span data-ttu-id="609e0-136">Movimentação de pastas conhecidas no OneDrive</span><span class="sxs-lookup"><span data-stu-id="609e0-136">OneDrive Known Folder Move</span></span>

<span data-ttu-id="609e0-p112">Se seus usuários estão no OneDrive e você está adicionando o OneDrive como parte desta implantação, há uma nova opção disponível para você. Usando a nuvem para sincronizar arquivos de usuários, o recurso “Movimentação de Pastas Conhecidas” do OneDrive proporciona um nível de flexibilidade que não é possível com as opções de migração de arquivos baseadas na rede local. Se habilitada antes da migração, ela fornece acesso seguro nos PCs novos e atualizados e elimina a necessidade de criar depósitos temporários de migração em seus próprios servidores. Também tem o potencial de ser completamente transparente para o usuário.</span><span class="sxs-lookup"><span data-stu-id="609e0-p112">If your users are on OneDrive or you are adding OneDrive in as part of this deployment, there is new option available to you. Using the cloud to synchronize user files, OneDrive “Known Folder Move” feature provides a level of flexibility not possible with local network-based file migration options. If enabled prior to migration, it provides secure access on new or refreshed PCs and, it eliminates the need to create temporary migration stores on your own servers. It is also has the potential to be completely transparent to the user.</span></span>

[<span data-ttu-id="609e0-141">Redirecionar e mover as pastas conhecidas do Windows para o OneDrive</span><span class="sxs-lookup"><span data-stu-id="609e0-141">Redirect and move Windows known folders to OneDrive</span></span>](https://docs.microsoft.com/onedrive/redirect-known-folders)

<span data-ttu-id="609e0-p113">Se você já está usando o OneDrive, sabe que os usuários podem escolher as pastas e locais que desejam sincronizar no OneDrive ou SharePoint com seu dispositivo, mas na verdade isso impõe a carga da configuração ao usuário. Com a Movimentação de Pastas Conhecidas, você pode direcionar as pastas Documentos, Área de Trabalho e Imagens dentro de um perfil de usuário e protegê-las todas no OneDrive. Um usuário consegue fazer isso por si próprio ou, o que é importante nesse cenário, você pode [executar isso usando as configurações de Política de Grupo](https://docs.microsoft.com/onedrive/use-group-policy?redirectSourcePath=%252fen-us%252farticle%252fUse-Group-Policy-to-control-OneDrive-sync-client-settings-0ecb2cf5-8882-42b3-a6e9-be6bda30899c).</span><span class="sxs-lookup"><span data-stu-id="609e0-p113">If you’re already using OneDrive, you will know that users can select the folders and locations they would like to sync from OneDrive or SharePoint to their device, but that effectively puts the burden on the end user to set it up. With Known Folder Move, you can target the Documents, Desktop and Pictures folders within a user profile and protect it all on OneDrive. A user can do this themselves or, importantly for this scenario, you can [enforce this using Group Policy settings](https://docs.microsoft.com/onedrive/use-group-policy?redirectSourcePath=%252fen-us%252farticle%252fUse-Group-Policy-to-control-OneDrive-sync-client-settings-0ecb2cf5-8882-42b3-a6e9-be6bda30899c).</span></span>

<span data-ttu-id="609e0-p114">Com a Movimentação de Pastas Conhecidas, os usuários não alteram seu fluxo de trabalho - tudo parece igual antes, durante e depois da conclusão da sincronização com o OneDrive. Através da Política de Grupo, você até pode escolher se quer ou não notificar os usuários de que seus documentos, imagens e área de trabalho estão protegidos no OneDrive. Se preferir não fazê-lo, tudo acontecerá silenciosamente no plano de fundo. Os usuários só saberão quando receberem novos PCs ou quando seus PCs forem atualizados. Assim que entrarem em suas novas contas do OneDrive, estes arquivos estarão disponíveis novamente e serão restaurados em seus novos PCs. E é claro que o OneDrive garante que eles também terão seus arquivos seguramente a qualquer momento em seus telefones e em outros dispositivos.</span><span class="sxs-lookup"><span data-stu-id="609e0-p114">With Known Folder Move, users don’t change their workflow – everything looks the same before, during and after synchronization with OneDrive is complete. Through Group Policy you can even choose whether or not to notify users that their documents, pictures and desktop are protected in OneDrive. If you choose not to, it all happens silently in the background. The users will only be aware when they take delivery of a new PC or their PC is refreshed. As soon as they sign in to their OneDrive account, these files will be available again, and will be restored to their new PC. And of course, OneDrive means they will also their files securely at any time from their phones and other devices.</span></span>

<span data-ttu-id="609e0-151">A autenticação para o OneDrive é fornecida pelo Azure Active Directory, de modo que, para uma segurança adicional, você pode facilmente habilitar a autenticação multifatorial e definir políticas para controlar a largura de banda de carregamento e download que o OneDrive usa para limitar a atividade de rede.</span><span class="sxs-lookup"><span data-stu-id="609e0-151">Authentication for OneDrive powered by Azure Active Directory, so for extra security, you can easily enable multi-factor authentication, and you can set policies to control the upload and download bandwidth OneDrive uses to limit network activity.</span></span>

<span data-ttu-id="609e0-p115">Você não precisa migrar todos os usuários ao mesmo tempo. É possível que você dividir a implantação das configurações de Política de Grupo em fazes ou [limitar a sincronização de arquivos a PCs do domínio](https://docs.microsoft.com/powershell/module/sharepoint-online/Set-SPOTenantSyncClientRestriction?view=sharepoint-ps).</span><span class="sxs-lookup"><span data-stu-id="609e0-p115">You don’t have to migrate every use at the same time. You may want phase the roll-out of the Group Policy settings, or [limit file sync to domain-joined PCs](https://docs.microsoft.com/powershell/module/sharepoint-online/Set-SPOTenantSyncClientRestriction?view=sharepoint-ps).</span></span>

## <a name="start-menu-and-task-bar-customization"></a><span data-ttu-id="609e0-154">Menu Iniciar e personalização da barra de tarefas</span><span class="sxs-lookup"><span data-stu-id="609e0-154">Start Menu and Task Bar Customization</span></span>

<span data-ttu-id="609e0-p116">O OneDrive foi projetado para sincronizar e proteger arquivos e pastas. ele não sincroniza aplicativos ou configurações do Windows. Para fazer isso no passado, você deve ter usado o método de perfil de cópia para configurar layouts padrão para os menus Iniciar e configurações da barra de tarefas dos usuários. No Windows 10 Pro, Enterprise e Education, você pode usar a Política de Grupo, MDM, PowerShell ou fornecer pacotes para implantar o [menu Iniciar e layouts da barra de tarefas personalizados](https://docs.microsoft.com/windows/configuration/windows-10-start-layout-options-and-policies). Não é necessário refazer imagens e o layout pode ser atualizado simplesmente sobrescrevendo o arquivo .xml que o contém.</span><span class="sxs-lookup"><span data-stu-id="609e0-p116">OneDrive is designed to sync and protect files and folders; it does not sync application or Windows settings. To do this in the past you may have used the copy profile method to configure standard layouts for users’ Start menus and taskbar settings. In Windows 10 Pro, Enterprise, and Education, you can use Group Policy, MDM, PowerShell, or provisioning packages, to deploy [customized Start and taskbar layouts](https://docs.microsoft.com/windows/configuration/windows-10-start-layout-options-and-policies). No reimaging is required, and the layout can be updated simply by overwriting the .xml file that contains the layout.</span></span>

<span data-ttu-id="609e0-p117">Para criar um novo layout, simplesmente configure um sistema de amostras e use o cmdlet [Export-StartLayout](https://docs.microsoft.com/powershell/module/startlayout/export-startlayout?view=win10-ps) do PowerShell para gerar um arquivo XML, e depois coloque este arquivo em um compartilhamento de rede ou o distribua localmente como parte de sua sequência de implantação; ele só precisa estar acessível como arquivo de Somente leitura quando o usuário entrar. Então, você pode usar a política ou o cmdlet [Import-StartLayout](https://docs.microsoft.com/powershell/module/startlayout/import-startlayout?view=win10-ps) para referenciar este arquivo.</span><span class="sxs-lookup"><span data-stu-id="609e0-p117">To create a new layout simply configure a sample system, and use the PowerShell [Export-StartLayout](https://docs.microsoft.com/powershell/module/startlayout/export-startlayout?view=win10-ps) cmdlet to generate an XML file, then place this file on a network share, or cache it locally as part of your deployment sequence; it just needs to be reachable as Read-only file once the user signs in. You can then use policy or the [Import-StartLayout](https://docs.microsoft.com/powershell/module/startlayout/import-startlayout?view=win10-ps) cmdlet to reference this file.</span></span>

## <a name="removing-unwanted-in-box-apps"></a><span data-ttu-id="609e0-161">Remoção de aplicativos indesejados de caixa de entrada</span><span class="sxs-lookup"><span data-stu-id="609e0-161">Removing unwanted in-box apps</span></span>

<span data-ttu-id="609e0-p118">O Windows 10 inclui muitos aplicativos internos úteis como parte da instalação padrão, mas você pode preferir remover alguns deles de seus PCs gerenciados e até configurar sua instalação de modo a impedir que esses aplicativos retornem, por exemplo, XBOX ou Zune Music. Você pode recuperar uma lista desses aplicativos suando os comando do [PowerShell Get-AppxPackage](https://technet.microsoft.com/library/hh856044.aspx) e remover os que você não deseja usando o comando [Remove-AppxPackage](https://technet.microsoft.com/library/hh856038.aspx). Como alternativa, você pode montar o arquivo Windows Image (.img) off line antes da implantação e extrair pacotes que não deseja usar usando a ferramenta de linha de comando [Gerenciamento e Manutenção de Imagens de Implantação (DISM)](https://docs.microsoft.com/windows-hardware/manufacture/desktop/what-is-dism) e o comando [Remove-AppxProvisionedPackage](https://docs.microsoft.com/powershell/module/dism/remove-appxprovisionedpackage?view=win10-ps).</span><span class="sxs-lookup"><span data-stu-id="609e0-p118">Windows 10 includes many useful built-in apps as part of the standard installation, but you may want to remove some of these from your managed PCs, and even configure your installation to prevent those apps from returning, for example, XBOX or Zune Music. You can retrieve a list of these apps using the [PowerShell Get-AppxPackage](https://technet.microsoft.com/library/hh856044.aspx) commands, and remove those you do not want using the [Remove-AppxPackage](https://technet.microsoft.com/library/hh856038.aspx) command. Alternatively, you can mount the Windows Image (.img) file offline before deployment, and extract packages you do not want using the [Deployment Image Servicing and Management (DISM)](https://docs.microsoft.com/windows-hardware/manufacture/desktop/what-is-dism) command line tool and the [Remove-AppxProvisionedPackage](https://docs.microsoft.com/powershell/module/dism/remove-appxprovisionedpackage?view=win10-ps) command.</span></span>

## <a name="next-step"></a><span data-ttu-id="609e0-165">Próxima etapa</span><span class="sxs-lookup"><span data-stu-id="609e0-165">Next Step</span></span>

## <a name="step-5-security-and-compliance-considerationshttpsakamsmdd5"></a>[<span data-ttu-id="609e0-166">Etapa 5: Considerações de segurança e conformidade</span><span class="sxs-lookup"><span data-stu-id="609e0-166">Step 5: Security and Compliance Considerations</span></span>](https://aka.ms/mdd5)

## <a name="previous-step"></a><span data-ttu-id="609e0-167">Etapa anterior</span><span class="sxs-lookup"><span data-stu-id="609e0-167">Previous Step</span></span>

## <a name="step-3-office-and-lob-app-deliveryhttpsakamsmdd3"></a>[<span data-ttu-id="609e0-168">Etapa 3: Entrega de aplicativos do Office e LOB</span><span class="sxs-lookup"><span data-stu-id="609e0-168">Step 3: Office and LOB App Delivery</span></span>](https://aka.ms/mdd3)
