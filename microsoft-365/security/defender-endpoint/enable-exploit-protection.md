---
title: Ativar a proteção de exploração para ajudar a atenuar contra ataques
keywords: exploit, mitigation, attacks, vulnerability
description: Saiba como habilitar a proteção de exploração Windows 10. A proteção de exploração ajuda a proteger seu dispositivo contra malware.
search.product: eADQiWindows 10XVcnh
ms.prod: m365-security
ms.mktglfcycl: manage
ms.sitesec: library
localization_priority: Normal
audience: ITPro
author: denisebmsft
ms.author: deniseb
ms.reviewer: ksarens
manager: dansimp
ms.technology: mde
ms.topic: how-to
ms.date: 05/11/2021
ms.openlocfilehash: 62ae62cc1041e4de9c31e99cb90bed5b1a7312ad
ms.sourcegitcommit: 967f64dfa1a05f31179c8316b96bfb7758a5d990
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 05/12/2021
ms.locfileid: "52333718"
---
# <a name="enable-exploit-protection"></a>Habilitar a proteção de exploração

**Aplica-se a:**
- [Microsoft Defender para Ponto de Extremidade](https://go.microsoft.com/fwlink/p/?linkid=2154037)
- [Microsoft 365 Defender](https://go.microsoft.com/fwlink/?linkid=2118804)

> [!TIP]
> Deseja experimentar o Defender para Ponto de Extremidade? [Inscreva-se para uma avaliação gratuita.](https://www.microsoft.com/microsoft-365/windows/microsoft-defender-atp?ocid=docs-wdatp-assignaccess-abovefoldlink)

[A proteção de exploração](exploit-protection.md) ajuda a proteger contra malware que usa explorações para infectar dispositivos e se propagar. A proteção de exploração consiste em muitas mitigações que podem ser aplicadas ao sistema operacional ou aplicativos individuais.

> [!IMPORTANT]
> O .NET 2.0 não é compatível com alguns recursos de proteção de exploração, especificamente, Export Address Filtering (EAF) e Import Address Filtering (IAF). Se você habilitar o .NET 2.0, não há suporte para o uso de EAF e IAF.

Muitos recursos da Experiência de Mitigação Aprimorada Toolkit (EMET) estão incluídos na proteção de exploração.

Você pode habilitar cada mitigação separadamente usando qualquer um desses métodos:   
- [Segurança do Windows app](#windows-security-app)
- [Microsoft Intune](#intune)
- [Gerenciamento de Dispositivo Móvel (MDM)](#mdm)
- [Gerenciador de Configuração do Microsoft Endpoint](#microsoft-endpoint-configuration-manager)
- [Política de grupo](#group-policy)
- [PowerShell](#powershell)

A proteção de exploração é configurada por padrão Windows 10. Você pode definir cada mitigação como on, off ou com seu valor padrão. Algumas mitigações têm mais opções. Você pode [exportar essas configurações como um arquivo XML](import-export-exploit-protection-emet-xml.md) e implantá-las em outros dispositivos.

Você também pode definir mitigações para o [modo de auditoria.](evaluate-exploit-protection.md) O modo de auditoria permite testar como as mitigações funcionariam (e revisar eventos) sem afetar o uso normal do dispositivo.

## <a name="windows-security-app"></a>Segurança do Windows app

1. Abra o Segurança do Windows aplicativo selecionando o ícone de escudo na barra de tarefas ou pesquisando o menu Iniciar para **Segurança**.

2. Selecione o **& de** controle do navegador (ou o ícone do aplicativo na barra de **menus** esquerda) e selecione Explorar configurações de proteção .

3. Vá para **Configurações do programa** e escolha o aplicativo ao qual você deseja aplicar mitigações. <br/>
    - Se o aplicativo que você deseja configurar já estiver listado, selecione-o e selecione **Editar**.
    - Se o aplicativo não estiver listado, na parte superior da lista, selecione **Adicionar** programa a ser personalizado e escolha como deseja adicionar o aplicativo. <br/>
    - Use **Adicionar por nome de** programa para que a mitigação seja aplicada a qualquer processo em execução com esse nome. Especifique um arquivo com sua extensão. Você pode inserir um caminho completo para limitar a mitigação apenas ao aplicativo com esse nome nesse local.
    - Use **Escolher o caminho exato do arquivo** para usar uma janela Windows seletor de arquivos do Explorer padrão para encontrar e selecionar o arquivo que você deseja.

4. Depois de selecionar o aplicativo, você verá uma lista de todas as mitigações que podem ser aplicadas. Escolher **Auditoria** aplicará a mitigação somente no modo de auditoria. Você será notificado se precisar reiniciar o processo ou aplicativo ou se precisar reiniciar Windows.

5. Repita as etapas 3 a 4 para todos os aplicativos e mitigações que você deseja configurar.

6. Na seção **Configurações do sistema,** encontre a mitigação que você deseja configurar e especifique uma das seguintes configurações. Os aplicativos que não estão configurados individualmente na seção Configurações **do** programa usam as configurações configuradas aqui.<br/>
    - **Ativado por padrão:** a  mitigação está habilitada para aplicativos que não têm essa mitigação definida na seção Configurações de **Programa específicas do** aplicativo
    - **Desativado por padrão:** a  mitigação está desabilitada para aplicativos que não têm essa mitigação definida na seção Configurações de **programa específicas do** aplicativo
    - **Usar padrão**: a mitigação está habilitada ou desabilitada, dependendo da configuração padrão que é configurada por Windows 10 instalação; o valor padrão (**On** or **Off**) é sempre especificado ao lado do **rótulo padrão Usar** para cada mitigação

7. Repita a etapa 6 para todas as mitigações no nível do sistema que você deseja configurar. Selecione **Aplicar** quando terminar de configurar sua configuração.

Se você adicionar um  aplicativo à seção Configurações do Programa e definir as configurações de mitigação individuais lá, eles serão honrados acima da configuração para as mesmas mitigações especificadas na seção **Configurações do** sistema. A seguinte matriz e exemplos ajudam a ilustrar como os padrões funcionam:

|Habilitado nas **configurações do programa** | Habilitado nas **configurações do sistema** | Comportamento |
|:---|:---|:---|
|Sim | Não | Conforme definido nas **configurações do programa** |
|Sim | Sim | Conforme definido nas **configurações do programa** |
|Não | Sim | Conforme definido nas **configurações do sistema** |
|Não | Sim | Padrão conforme definido em **Usar opção** padrão |

### <a name="example-1-mikael-configures-data-execution-prevention-in-system-settings-section-to-be-off-by-default"></a>Exemplo 1: O Mikael configura a Prevenção de Execução de Dados na seção configurações do sistema para estar desligada por padrão

O Mikael adiciona o *aplicativotest.exe* à **seção Configurações do** programa. Nas opções para esse aplicativo, em Prevenção de Execução de Dados **(DEP),** o Mikael habilita a opção Substituir configurações **do** sistema e define a opção **como Ativado.** Não há outros aplicativos listados na seção **Configurações do** programa.

O resultado é que a DEP está habilitada somente *paratest.exe*. Todos os outros aplicativos não terão o DEP aplicado.

### <a name="example-2-josie-configures-data-execution-prevention-in-system-settings-to-be-off-by-default"></a>Exemplo 2: Josie configura a Prevenção de Execução de Dados em configurações do sistema para serem desligadas por padrão

A Josie adiciona o aplicativo *test.exe* à **seção Configurações do** programa. Nas opções para esse aplicativo, em Prevenção de Execução  de Dados **(DEP),** Josie habilita a opção Substituir configurações do sistema e define a opção **como Ativado**.

A Josie também adiciona o aplicativo *miles.exe* à seção Configurações **do** Programa e configura o Controle de proteção de fluxo **(CFG)** como **On**. A Josie não habilita a opção Substituir configurações **do** sistema para DEP ou qualquer outra mitigação para esse aplicativo.

O resultado é que a DEP está habilitada para *test.exe*. O DEP não será habilitado para nenhum outro aplicativo, incluindo *miles.exe*. O CFG será habilitado *para* miles.exe.

1. Abra o Segurança do Windows aplicativo selecionando o ícone de escudo na barra de tarefas ou pesquisando o menu inicial do **Defender**.

2. Selecione o **& de controle do navegador** (ou o ícone do aplicativo na barra de menus esquerda) e selecione Exploit **protection**.

3. Vá para **Configurações do programa** e escolha o aplicativo ao qual você deseja aplicar mitigações.<br/>
    - Se o aplicativo que você deseja configurar já estiver listado, selecione-o e selecione **Editar**.
    - Se o aplicativo não estiver listado, na parte superior da lista, selecione **Adicionar** programa a ser personalizado e escolha como deseja adicionar o aplicativo.<br/>
     - Use **Adicionar por nome de** programa para que a mitigação seja aplicada a qualquer processo em execução com esse nome. Especifique um arquivo com uma extensão. Você pode inserir um caminho completo para limitar a mitigação apenas ao aplicativo com esse nome nesse local.
     - Use **Escolher o caminho exato do arquivo** para usar uma janela Windows seletor de arquivos do Explorer padrão para encontrar e selecionar o arquivo que você deseja.

4. Depois de selecionar o aplicativo, você verá uma lista de todas as mitigações que podem ser aplicadas. Escolher **Auditoria** aplicará a mitigação somente no modo de auditoria. Você será notificado se precisar reiniciar o processo ou aplicativo ou se precisar reiniciar Windows.

5. Repita as etapas 3 a 4 para todos os aplicativos e mitigações que você deseja configurar. Selecione **Aplicar** quando terminar de configurar sua configuração.

## <a name="intune"></a>Intune

1. Entre no [portal do Azure e](https://portal.azure.com) abra o Intune.

2. Vá para **Configuração do dispositivo**  >  **Perfis**  >  **Criar perfil**.

3. Nomee o perfil, escolha **Windows 10 e posterior e** Proteção de Ponto de **Extremidade.**

   :::image type="content" source="images/create-endpoint-protection-profile.png" alt-text="Criar perfil de proteção de ponto de extremidade":::

4. Selecione **Configurar Windows Defender** Proteção de  >    >  **Exploração do Exploit Guard**.

5. Carregue um [arquivo XML](/windows/client-management/mdm/policy-csp-exploitguard) com as configurações de proteção de exploração:

   :::image type="content" source="images/enable-ep-intune.png" alt-text="Habilitar a proteção de rede no Intune":::

6. Selecione **OK** para salvar cada folha aberta e escolha **Criar**.

7. Selecione a guia Atribuições de perfil, atribua a política a Todos os **Usuários & Todos os** **Dispositivos** e selecione **Salvar**.

## <a name="mdm"></a>MDM

Use o provedor de serviços de configuração [./Vendor/MSFT/Policy/Config/ExploitGuard/ExploitProtectionSettings](/windows/client-management/mdm/policy-csp-exploitguard) (CSP) para habilitar ou desabilitar mitigações de proteção de exploração ou para usar o modo de auditoria.

## <a name="microsoft-endpoint-manager"></a>Microsoft Endpoint Manager

1. No Microsoft Endpoint Manager, acesse **Endpoint Security**  >  **Attack surface reduction**. 

2. Selecione **Criar Plataforma de**  >  **Política** e, para **Perfil,** escolha **Exploit Protection**. Selecione **Criar**.

3. Especifique um nome e uma descrição e escolha **Next**.

4. Escolha **Selecionar Arquivo XML e** navegue até o local do arquivo XML de proteção de exploração. Selecione o arquivo e escolha **Próximo**.

5. Configure **marcas de escopo** e **atribuições,** se necessário. 

6. Em **Revisar + criar**, revisar suas configurações e, em seguida, escolha **Criar**.


## <a name="microsoft-endpoint-configuration-manager"></a>Gerenciador de Configuração do Microsoft Endpoint

1. No Microsoft Endpoint Configuration Manager, acesse **Assets and Compliance**  >  **Endpoint Protection** Windows Defender Exploit  >  **Guard.**

2. Selecione **Home**  >  **Create Exploit Guard Policy**.

3. Especifique um nome e uma descrição, selecione **Exploit protection** e escolha **Next**.

4. Navegue até o local do arquivo XML de proteção de exploração e selecione **Next**.

5. Revise as configurações e escolha **Próximo** para criar a política.

6. Depois que a política for criada, selecione **Fechar**.

## <a name="group-policy"></a>Política de Grupo

1. Em seu dispositivo de gerenciamento de Política de Grupo, abra o Console de Gerenciamento de Política de [Grupo](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc731212(v=ws.11)), clique com o botão direito do mouse no Objeto de Política de Grupo que você deseja configurar e clique em **Editar**.

2. No Editor **de Gerenciamento de Política de Grupo,** acesse **Configuração do** computador e selecione Modelos **administrativos.**

3. Expanda a árvore **para componentes do Windows** Windows Defender Exploit  >  **Guard**  >  **Exploit Protection** Use um conjunto comum de  >  **configurações de proteção de exploração.**

4. Selecione **Habilitado e** digite o local do arquivo [XML](/windows/client-management/mdm/policy-csp-exploitguard)e escolha **OK**.

## <a name="powershell"></a>PowerShell

Você pode usar o verbo do PowerShell `Get` `Set` ou com o cmdlet `ProcessMitigation` . O uso lista o status de configuração atual de quaisquer mitigações que tenham sido habilitadas no dispositivo - adicione o cmdlet e o aplicativo exe para ver mitigações para apenas `Get` `-Name` esse aplicativo:

```PowerShell
Get-ProcessMitigation -Name processName.exe
```

> [!IMPORTANT]
> Mitigações no nível do sistema que não foram configuradas mostrarão um status de `NOTSET` .
> - Para configurações no nível do sistema, indica que a configuração padrão para `NOTSET` essa mitigação foi aplicada.
> - Para configurações no nível do aplicativo, indica que a configuração no nível do sistema para a `NOTSET` mitigação será aplicada.
> A configuração padrão para cada mitigação no nível do sistema pode ser vista no Windows Security.

Use `Set` para configurar cada mitigação no seguinte formato:

```PowerShell
Set-ProcessMitigation -<scope> <app executable> -<action> <mitigation or options>,<mitigation or options>,<mitigation or options>
```

Onde:

* \<Scope>:
  * `-Name` para indicar que as mitigações devem ser aplicadas a um aplicativo específico. Especifique o executável do aplicativo após esse sinalizador.
    * `-System` para indicar que a mitigação deve ser aplicada no nível do sistema
* \<Action>:
  * `-Enable` para habilitar a mitigação
  * `-Disable` para desabilitar a mitigação
* \<Mitigation>:
  * O cmdlet da mitigação juntamente com quaisquer subopções (cercadas de espaços). Cada mitigação é separada com uma vírgula.

Por exemplo, para habilitar a mitigação de Prevenção de Execução de Dados (DEP) com emulação thunk atl e para um executável chamado *testing.exena* pasta *C:\Apps\LOB\tests*, e para impedir que o executável de criar processos filho, use o seguinte comando:

```PowerShell
Set-ProcessMitigation -Name c:\apps\lob\tests\testing.exe -Enable DEP, EmulateAtlThunks, DisallowChildProcessCreation
```

> [!IMPORTANT]
> Separe cada opção de mitigação com vírgulas.

Se você quisesse aplicar o DEP no nível do sistema, usaria o seguinte comando:

```PowerShell
Set-Processmitigation -System -Enable DEP
```

Para desabilitar mitigações, você pode substituir `-Enable` por `-Disable` . No entanto, para mitigações no nível do aplicativo, essa ação força a mitigação a ser desabilitada apenas para esse aplicativo.

Se você precisar restaurar a mitigação de volta ao padrão do sistema, também precisará incluir o `-Remove` cmdlet, como no exemplo a seguir:

```PowerShell
Set-Processmitigation -Name test.exe -Remove -Disable DEP
```

A tabela a seguir lista as **Mitigações** **individuais**(e Auditorias , quando disponíveis) a serem usadas com os `-Enable` parâmetros ou `-Disable` cmdlet.

| Tipo de mitigação | Aplicável a | Palavra-chave do parâmetro de cmdlet de mitigação | Parâmetro de cmdlet do modo de auditoria |
| :-------------- | :--------- | :---------------------------------- | :-------------------------- |
| Proteção de fluxo de controle (CFG) | Nível do sistema e do aplicativo |   `CFG`,   `StrictCFG`,   `SuppressExports`  | Auditoria não disponível |
| Prevenção de Execução de Dados (DEP) | Nível do sistema e do aplicativo |   `DEP`,   `EmulateAtlThunks`  | Auditoria não disponível |
| Forçar a randomização para imagens (ASLR obrigatória) | Nível do sistema e do aplicativo |   `ForceRelocateImages`  | Auditoria não disponível |
| Randomize alocações de memória (ASLR inferior para cima) | Nível do sistema e do aplicativo |   `BottomUp`,   `HighEntropy`  | Auditoria não disponível
| Validar cadeias de exceção (SEHOP) | Nível do sistema e do aplicativo |   `SEHOP`,   `SEHOPTelemetry`  | Auditoria não disponível |
| Validar a integridade da pilha | Nível do sistema e do aplicativo |   `TerminateOnError`  | Auditoria não disponível |
| Proteção de código arbitrária (ACG) | Somente no nível do aplicativo |   `DynamicCode`  |   `AuditDynamicCode` |
| Bloquear imagens de baixa integridade | Somente no nível do aplicativo |   `BlockLowLabel`  |   `AuditImageLoad` |
| Bloquear imagens remotas | Somente no nível do aplicativo |   `BlockRemoteImages`  | Auditoria não disponível |
| Bloquear fontes não confianças | Somente no nível do aplicativo |   `DisableNonSystemFonts`  |   `AuditFont`,   `FontAuditOnly` |
| Proteção de integridade de código | Somente no nível do aplicativo |   `BlockNonMicrosoftSigned`,   `AllowStoreSigned`  |   AuditMicrosoftSigned, AuditStoreSigned |
| Desabilitar pontos de extensão | Somente no nível do aplicativo |   `ExtensionPoint`  | Auditoria não disponível |
| Desabilitar chamadas do sistema Win32k | Somente no nível do aplicativo |   `DisableWin32kSystemCalls`  |   `AuditSystemCall` |
| Não permitir processos filho | Somente no nível do aplicativo |   `DisallowChildProcessCreation`  |   `AuditChildProcess` |
| Exportar filtragem de endereços (EAF) | Somente no nível do aplicativo |   `EnableExportAddressFilterPlus`, `EnableExportAddressFilter` <a href="#r1" id="t1"> \[ 1 \] </a>   | Auditoria não disponível<a href="#r2" id="t2"> \[ 2 \] </a> |
| Importar filtragem de endereços (IAF) | Somente no nível do aplicativo |   `EnableImportAddressFilter`  | Auditoria não disponível<a href="#r2" id="t2"> \[ 2 \] </a> |
| Simular execução (SimExec) | Somente no nível do aplicativo |   `EnableRopSimExec`  | Auditoria não disponível<a href="#r2" id="t2"> \[ 2 \] </a> |
| Validar invocação de API (CallerCheck) | Somente no nível do aplicativo |   `EnableRopCallerCheck`  | Auditoria não disponível<a href="#r2" id="t2"> \[ 2 \] </a> |
| Validar o uso da alça | Somente no nível do aplicativo |   `StrictHandle`  | Auditoria não disponível |
| Validar a integridade da dependência de imagem | Somente no nível do aplicativo |   `EnforceModuleDepencySigning`  | Auditoria não disponível |
| Validar a integridade da pilha (StackPivot) | Somente no nível do aplicativo |   `EnableRopStackPivot`  | Auditoria não disponível<a href="#r2" id="t2"> \[ 2 \] </a> |

<a href="#t1" id="r1"> \[ 1 \] </a>: Use o seguinte formato para habilitar módulos EAF para DLLs para um processo:

```PowerShell
Set-ProcessMitigation -Name processName.exe -Enable EnableExportAddressFilterPlus -EAFModules dllName1.dll,dllName2.dll
```
<a href="#t2" id="r2"> \[ 2 \] </a>: A auditoria para essa mitigação não está disponível por meio de cmdlets do PowerShell.

## <a name="customize-the-notification"></a>Personalizar a notificação

Para obter informações sobre como personalizar a notificação quando uma regra é disparada e um aplicativo ou arquivo é bloqueado, consulte [Windows Security](/windows/security/threat-protection/windows-defender-security-center/windows-defender-security-center).

## <a name="see-also"></a>Confira também

- [Avaliar a proteção de exploração](evaluate-exploit-protection.md)
- [Configurar e auditar mitigações de proteção de exploração](customize-exploit-protection.md)
- [Importar, exportar e implantar configurações da proteção de exploração](import-export-exploit-protection-emet-xml.md)
